@using MetaGraffiti.Web.Admin.Models;
@model TrailViewModel

@Html.Partial("_Nav")


<div class="row">
	<div class="col-sm-4">
		<div class="h3">
			@if (Model.SelectedMonth.HasValue)
			{
				<a href="@TrailViewModel.GetReportUrl(Model.SelectedYear.Value)">@Model.SelectedYear</a>
				<span> \ </span>
				@Model.GetMonth(Model.SelectedMonth)
			}
			else
			{
				@Model.SelectedYear
			}
		</div>
	</div>
	<div class="col-sm-8 text-right">
		@if (Model.SelectedMonth.HasValue)
		{
			<div class="h6">
				@for (int month = 1; month <= 12; month++)
				{
					<a class="@(Model.SelectedMonth == month ? "font-italic" : "")" href="@TrailViewModel.GetReportUrl(Model.SelectedYear.Value, month)">@Model.GetMonth(month)</a>
					<span>&nbsp;</span>
				}
			</div>
		}
		else if (Model.SelectedYear.HasValue)
		{
			<div class="h5">
				@for (var year = Model.FirstDate.Year; year <= Model.LastDate.Year; year++)
				{
					<a class="@(Model.SelectedYear == year ? "font-italic" : "")" href="@TrailViewModel.GetReportUrl(year)">@year</a>
					<span>&nbsp;</span>
				}
			</div>
		}
	</div>
</div>
<hr />

<table class="table table-striped">
	<thead class="table-dark">
		<tr>
			<th>Country</th>
			<th>Date</th>
			<th>Name</th>
			<th>Tags</th>
			<th>Description</th>
			<th>Distance</th>
			<th>Time</th>
			<th>Tracks</th>
			<th>Points</th>

		</tr>
	</thead>
	<tbody>
		@foreach (var trail in Model.Trails)
		{
		<tr>
			<td>@trail.Country.Name</td>
			<td>@trail.LocalDate.ToString("yyyy-MM-dd")</td>
			<td>
				<a href="@TrailViewModel.GetDisplayUrl(trail.ID)">@trail.Name</a>
			</td>
			<td>
				@foreach (var tag in trail.AutoTags)
		{
			<span class="badge badge-pill badge-@CssHelper.GetTagCss(tag)">@tag</span>
}
			</td>
			<td>@trail.Description</td>
			<td></td>
			<td></td>
			<td>@trail.Tracks.Count</td>
			<td>@trail.Tracks.SelectMany(x => x.Points).Count()</td>
		</tr>
		}
	</tbody>
</table>
